FROM ubuntu:latest

RUN apt-get update && \
    apt-get install -y doxygen graphviz git

WORKDIR /docs-generator

COPY src/main/resources/Doxyfile .
COPY src/main/java /app/src/main/java

RUN mkdir -p /docs-generator/out && chmod -R a+rwx /docs-generator

RUN echo "=== Estructura del contenedor ===" && \
    ls -la && \
    ls -la /app/src/main/java && \
    echo "==============================="

CMD ["sh", "-c", "doxygen Doxyfile && ls -la /docs-generator/out/html"]
